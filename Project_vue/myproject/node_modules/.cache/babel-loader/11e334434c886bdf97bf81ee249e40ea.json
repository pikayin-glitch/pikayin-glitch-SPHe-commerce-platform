{"ast":null,"code":"import _objectSpread from \"C:/Users/\\u5C39\\u6728\\u661F\\u8FB0/Desktop/Project_vue/myproject/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport throttle from \"lodash/throttle\"; // 引入lodash的部分功能\n// import _ from \"lodash\"引入全部功能\n\nexport default {\n  name: \"TypeNav\",\n  data: function data() {\n    return {\n      curIndex: -1\n    };\n  },\n  methods: {\n    // changeColor(index){\n    //     this.curIndex=index\n    // },\n    //ES6写法，没办法用防抖节流\n    // 使用ES5的写法可以\n    changeIndex: throttle(function (index) {\n      this.curIndex = index;\n    }, 100),\n    deleteColor: function deleteColor() {\n      this.curIndex = -1;\n    },\n    goSearch: function goSearch(event) {\n      var element = event.taget;\n      var categoryname = element.dataset.categoryname.categoryname;\n      var category1id = element.dataset.category1id.category1id;\n      var category2id = element.dataset.category2id.category2id;\n      var category3id = element.dataset.category3id.category3id;\n      console.log(\"我执行了\");\n\n      if (categoryname) //分类出a标签\n        {\n          var location = {\n            name: \"search\"\n          };\n          var query = {\n            categoryName: categoryname\n          };\n\n          if (category1id) {\n            //区分级别\n            query.category1Id = category1id;\n          } else if (category2id) {\n            query.category2Id = category2id;\n          } else if (category3id) {\n            query.category3Id = category3id;\n          } // 整理参数\n\n\n          location.query = query;\n          this.$route.push(location, function () {}, function () {});\n        }\n    }\n  },\n  mounted: function mounted() {\n    // 通知vuex发请求,获取数据存储到仓库\n    this.$store.dispatch(\"categoryList\");\n  },\n  computed: _objectSpread({}, mapState({\n    // 这个state是大仓库的state\n    categoryList: function categoryList(state) {\n      return state.home.categoryList;\n    }\n  }))\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA,uC,CACA;AACA;;AACA;AACAA,iBADA;AAEAC,MAFA,kBAEA;AACA;AACAC;AADA;AAGA,GANA;AAOAC;AACA;AACA;AACA;AACA;AACA;AACAC;AACA;AACA,KAFA,EAEA,GAFA,CANA;AASAC,eATA,yBASA;AACA;AACA,KAXA;AAYAC,YAZA,oBAYAC,KAZA,EAYA;AACA;AACA;AACA;AACA;AACA;AACAC;;AACA;AACA;AACA;AAAAR;AAAA;AACA;AAAAS;AAAA;;AACA;AAAA;AACAC;AACA,WAFA,MAGA;AACAA;AACA,WAFA,MAGA;AACAA;AACA,WAXA,CAYA;;;AACAC;AACA;AACA;AACA;AApCA,GAPA;AA6CAC,SA7CA,qBA6CA;AACA;AACA;AACA,GAhDA;AAiDAC,8BACAC;AACA;AACAC;AAAA;AAAA;AAFA,IADA;AAjDA","names":["name","data","curIndex","methods","changeIndex","deleteColor","goSearch","event","console","categoryName","query","location","mounted","computed","mapState","categoryList"],"sourceRoot":"src/components/TypeNav","sources":["index.vue"],"sourcesContent":["<template>\r\n    <div class=\"type-nav\">\r\n        <div class=\"container\" @mouseleave=\"deleteColor()\"  >\r\n            <h2 class=\"all\">全部商品分类</h2>\r\n            <nav class=\"nav\">\r\n                <a href=\"###\">服装城</a>\r\n                <a href=\"###\">美妆馆</a>\r\n                <a href=\"###\">尚品汇超市</a>\r\n                <a href=\"###\">全球购</a>\r\n                <a href=\"###\">闪购</a>\r\n                <a href=\"###\">团购</a>\r\n                <a href=\"###\">有趣</a>\r\n                <a href=\"###\">秒杀</a>\r\n            </nav>\r\n            <div class=\"sort\">\r\n                <div class=\"all-sort-list2\" @click=\"goSearch\">\r\n                    <div class=\"item\" v-for=\"(c1,index) in categoryList\" :key=\"c1.categoryId\" :class=\"{cur:curIndex==index}\">\r\n                        <h3 @mouseover=\"changeIndex(index)\">\r\n                            <!-- 一级分类 -->\r\n                            <a  :data-categoryName=\"c1.categoryName\" :data-category1Id=\"c1.categoryId\">{{c1.categoryName}}</a>\r\n                        </h3>\r\n                        <div class=\"item-list clearfix\" :style=\"{display:curIndex==index?'block':'none'}\">\r\n                            <div class=\"subitem\" v-for=\"c2 in c1.categoryChild\" :key=\"c2.categoryId\">\r\n                                <dl class=\"fore\">\r\n                                    <dt>\r\n                                        <!-- 二级分类 -->\r\n                                        <a :data-categoryName=\"c2.categoryName\" :data-category2Id=\"c2.categoryId\">{{c2.categoryName}}</a>\r\n                                    </dt>\r\n                                    <dd>\r\n                                        <em v-for=\"c3 in c2.categoryChild\" :key=\"c3.categoryId\">\r\n                                            <!-- 三级分类 -->\r\n                                            <a :data-categoryName=\"c3.categoryName\" :data-category3Id=\"c3.categoryId\">{{c3.categoryName}}</a>\r\n                                            <!-- route-link在这里每次都会创建组件实例，会卡顿\r\n                                             不建议使用 -->\r\n\r\n\r\n                                             <!-- @click会导致有过多的回调函数\r\n                                              不够理想，应该使用事件委派 -->\r\n\r\n                                              <!-- \r\n                                                事件委派存在的问题：\r\n                                                    无法知道点击的是其中具体哪个标签\r\n                                                    如何获取参数\r\n                                               -->\r\n                                        </em>\r\n                                    </dd>\r\n                                </dl>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport throttle from \"lodash/throttle\"\r\n// 引入lodash的部分功能\r\n// import _ from \"lodash\"引入全部功能\r\nexport default {\r\n    name:\"TypeNav\",\r\n    data(){\r\n      return {\r\n          curIndex:-1\r\n      }\r\n    },\r\n    methods: {\r\n      // changeColor(index){\r\n      //     this.curIndex=index\r\n      // },\r\n      //ES6写法，没办法用防抖节流\r\n      // 使用ES5的写法可以\r\n      changeIndex:throttle(function(index){\r\n          this.curIndex=index\r\n      },100),\r\n      deleteColor(){\r\n        this.curIndex=-1\r\n      },\r\n      goSearch(event){\r\n          let element=event.taget;\r\n          let {categoryname}=element.dataset.categoryname;\r\n          let {category1id}=element.dataset.category1id\r\n          let {category2id}=element.dataset.category2id\r\n          let {category3id}=element.dataset.category3id\r\n          console.log(\"我执行了\")\r\n          if(categoryname)//分类出a标签\r\n          {\r\n              let location ={name:\"search\"}\r\n              let query={categoryName:categoryname}\r\n              if(category1id){//区分级别\r\n                  query.category1Id=category1id\r\n              }\r\n              else if(category2id){\r\n                  query.category2Id=category2id\r\n              }\r\n              else if(category3id){\r\n                  query.category3Id=category3id\r\n              }\r\n              // 整理参数\r\n              location.query=query;\r\n              this.$route.push(location,()=>{},()=>{})\r\n          }\r\n      }\r\n    },\r\n    mounted() {\r\n        // 通知vuex发请求,获取数据存储到仓库\r\n        this.$store.dispatch(\"categoryList\")\r\n    },\r\n    computed:{\r\n        ...mapState({\r\n            // 这个state是大仓库的state\r\n            categoryList:state=>state.home.categoryList\r\n            \r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.type-nav {\r\n  border-bottom: 2px solid #e1251b;\r\n}\r\n.type-nav .container {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  position: relative;\r\n}\r\n.type-nav .container .all {\r\n  width: 210px;\r\n  height: 45px;\r\n  background-color: #e1251b;\r\n  line-height: 45px;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n}\r\n.type-nav .container .nav a {\r\n  height: 45px;\r\n  margin: 0 22px;\r\n  line-height: 45px;\r\n  font-size: 16px;\r\n  color: #333;\r\n}\r\n.type-nav .container .sort {\r\n  left: 0;\r\n  top: 45px;\r\n  width: 210px;\r\n  height: 461px;\r\n  position: absolute;\r\n  background: #fafafa;\r\n  z-index: 999;\r\n}\r\n/* .type-nav .container .sort .all-sort-list2 .item:hover {\r\n    background-color: skyblue;\r\n} */\r\n/* 使用函数实现背景色随鼠标改变，学习防抖与节流 */\r\n.cur{\r\n    background-color: skyblue;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item h3 {\r\n  line-height: 30px;\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  overflow: hidden;\r\n  padding: 0 20px;\r\n  margin: 0;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item h3 a {\r\n  color: #333;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list {\r\n  /* display: none; */\r\n  position: absolute;\r\n  width: 734px;\r\n  min-height: 460px;\r\n  background: #f7f7f7;\r\n  left: 210px;\r\n  border: 1px solid #ddd;\r\n  top: 0;\r\n  z-index: 9999 !important;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem {\r\n  float: left;\r\n  width: 650px;\r\n  padding: 0 4px 0 8px;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem dl {\r\n  border-top: 1px solid #eee;\r\n  padding: 6px 0;\r\n  overflow: hidden;\r\n  zoom: 1;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem dl.fore {\r\n  border-top: 0;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem dl dt {\r\n  float: left;\r\n  width: 54px;\r\n  line-height: 22px;\r\n  text-align: right;\r\n  padding: 3px 6px 0 0;\r\n  font-weight: 700;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem dl dd {\r\n  float: left;\r\n  width: 415px;\r\n  padding: 3px 0 0;\r\n  overflow: hidden;\r\n}\r\n.type-nav .container .sort .all-sort-list2 .item .item-list .subitem dl dd em {\r\n  float: left;\r\n  height: 14px;\r\n  line-height: 14px;\r\n  padding: 0 8px;\r\n  margin-top: 5px;\r\n  border-left: 1px solid #ccc;\r\n}\r\n/* .type-nav .container .sort .all-sort-list2 .item:hover .item-list {\r\n  display: block;\r\n} */\r\n</style>"]},"metadata":{},"sourceType":"module"}