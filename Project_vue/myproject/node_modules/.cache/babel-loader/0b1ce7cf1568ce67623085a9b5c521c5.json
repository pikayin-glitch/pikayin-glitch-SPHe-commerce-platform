{"ast":null,"code":"import _classCallCheck from \"C:/Users/\\u5C39\\u6728\\u661F\\u8FB0/Desktop/Vue_project/Project_vue/myproject/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/\\u5C39\\u6728\\u661F\\u8FB0/Desktop/Vue_project/Project_vue/myproject/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _typeof from \"C:/Users/\\u5C39\\u6728\\u661F\\u8FB0/Desktop/Vue_project/Project_vue/myproject/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _createForOfIteratorHelper from \"C:/Users/\\u5C39\\u6728\\u661F\\u8FB0/Desktop/Vue_project/Project_vue/myproject/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.number.constructor.js\";\n\n/*!\n * Vue-Lazyload.js v3.0.0-rc.1\n * (c) 2022 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\nimport { nextTick, reactive, defineComponent, ref, computed, onMounted, onUnmounted, createVNode, watch } from 'vue';\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar assignSymbols$1 = createCommonjsModule(function (module) {\n  var toString = Object.prototype.toString;\n  var isEnumerable = Object.prototype.propertyIsEnumerable;\n  var getSymbols = Object.getOwnPropertySymbols;\n\n  module.exports = function (target) {\n    if (!isObject(target)) {\n      throw new TypeError('expected the first argument to be an object');\n    }\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (args.length === 0 || typeof Symbol !== 'function' || typeof getSymbols !== 'function') {\n      return target;\n    }\n\n    for (var _i = 0, _args = args; _i < _args.length; _i++) {\n      var arg = _args[_i];\n      var names = getSymbols(arg);\n\n      var _iterator = _createForOfIteratorHelper(names),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n\n          if (isEnumerable.call(arg, key)) {\n            target[key] = arg[key];\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]' || Array.isArray(val);\n  }\n});\nvar assignSymbols$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  'default': assignSymbols$1,\n  __moduleExports: assignSymbols$1\n});\nvar assignSymbols = assignSymbols$2 && assignSymbols$1 || assignSymbols$2;\nvar assignDeep = createCommonjsModule(function (module) {\n  var toString = Object.prototype.toString;\n\n  var isValidKey = function isValidKey(key) {\n    return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n  };\n\n  var assign = module.exports = function (target) {\n    var i = 0;\n\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (isPrimitive(target)) target = args[i++];\n    if (!target) target = {};\n\n    for (; i < args.length; i++) {\n      if (isObject(args[i])) {\n        for (var _i2 = 0, _Object$keys = Object.keys(args[i]); _i2 < _Object$keys.length; _i2++) {\n          var key = _Object$keys[_i2];\n\n          if (isValidKey(key)) {\n            if (isObject(target[key]) && isObject(args[i][key])) {\n              assign(target[key], args[i][key]);\n            } else {\n              target[key] = args[i][key];\n            }\n          }\n        }\n\n        assignSymbols(target, args[i]);\n      }\n    }\n\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]';\n  }\n\n  function isPrimitive(val) {\n    return _typeof(val) === 'object' ? val === null : typeof val !== 'function';\n  }\n});\nvar inBrowser = typeof window !== 'undefined' && window !== null;\nvar hasIntersectionObserver = checkIntersectionObserver();\n\nfunction checkIntersectionObserver() {\n  if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/w3c/IntersectionObserver/issues/211\n    if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get: function get() {\n          return this.intersectionRatio > 0;\n        }\n      });\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nvar modeType = {\n  event: 'event',\n  observer: 'observer'\n};\n\nfunction _remove(arr, item) {\n  if (!arr.length) return;\n  var index = arr.indexOf(item);\n  if (index > -1) return arr.splice(index, 1);\n}\n\nfunction getBestSelectionFromSrcset(el, scale) {\n  if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return '';\n  var options = el.getAttribute('data-srcset').trim().split(',');\n  var result = [];\n  var container = el.parentNode;\n  var containerWidth = container.offsetWidth * scale;\n  var spaceIndex;\n  var tmpSrc;\n  var tmpWidth;\n  options.forEach(function (item) {\n    item = item.trim();\n    spaceIndex = item.lastIndexOf(' ');\n\n    if (spaceIndex === -1) {\n      tmpSrc = item;\n      tmpWidth = 99999;\n    } else {\n      tmpSrc = item.substr(0, spaceIndex);\n      tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n    }\n\n    result.push([tmpWidth, tmpSrc]);\n  });\n  result.sort(function (a, b) {\n    if (a[0] < b[0]) {\n      return 1;\n    }\n\n    if (a[0] > b[0]) {\n      return -1;\n    }\n\n    if (a[0] === b[0]) {\n      if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n        return 1;\n      }\n\n      if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n        return -1;\n      }\n    }\n\n    return 0;\n  });\n  var bestSelectedSrc = '';\n  var tmpOption;\n\n  for (var i = 0; i < result.length; i++) {\n    tmpOption = result[i];\n    bestSelectedSrc = tmpOption[1];\n    var next = result[i + 1];\n\n    if (next && next[0] < containerWidth) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    } else if (!next) {\n      bestSelectedSrc = tmpOption[1];\n      break;\n    }\n  }\n\n  return bestSelectedSrc;\n}\n\nvar getDPR = function getDPR() {\n  var scale = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n  return inBrowser ? window.devicePixelRatio || scale : scale;\n}; // https://developers.google.com/speed/webp/faq#how_can_i_detect_browser_support_using_javascript\n\n\nfunction supportWebp() {\n  if (!inBrowser) return false;\n  var support = true;\n\n  function checkWebpFeature(feature, callback) {\n    var kTestImages = {\n      lossy: 'UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA',\n      lossless: 'UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==',\n      alpha: 'UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==',\n      animation: 'UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA'\n    };\n    var img = new Image();\n\n    img.onload = function () {\n      var result = img.width > 0 && img.height > 0;\n      callback(result);\n    };\n\n    img.onerror = function () {\n      // eslint-disable-next-line node/no-callback-literal\n      callback(false);\n    };\n\n    img.src = 'data:image/webp;base64,' + kTestImages[feature];\n  }\n\n  checkWebpFeature('lossy', function (isSupported) {\n    support = isSupported;\n  });\n  checkWebpFeature('lossless', function (isSupported) {\n    support = isSupported;\n  });\n  checkWebpFeature('alpha', function (isSupported) {\n    support = isSupported;\n  });\n  checkWebpFeature('animation', function (isSupported) {\n    support = isSupported;\n  });\n  return support;\n}\n\nfunction throttle(action, delay) {\n  var timeout = null;\n  var lastRun = 0;\n  return function () {\n    if (timeout) {\n      return;\n    }\n\n    var elapsed = Date.now() - lastRun; // @ts-ignore\n\n    var context = this;\n    var args = arguments;\n\n    var runCallback = function runCallback() {\n      lastRun = Date.now();\n      timeout = false;\n      action.apply(context, args);\n    };\n\n    if (elapsed >= delay) {\n      runCallback();\n    } else {\n      timeout = setTimeout(runCallback, delay);\n    }\n  };\n}\n\nfunction testSupportsPassive() {\n  if (!inBrowser) return false;\n  var support = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        support = true;\n      }\n    });\n    window.addEventListener('test', noop, opts);\n  } catch (e) {}\n\n  return support;\n}\n\nvar supportsPassive = testSupportsPassive();\nvar _ = {\n  on: function on(el, type, func) {\n    var capture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    if (supportsPassive) {\n      el.addEventListener(type, func, {\n        capture: capture,\n        passive: true\n      });\n    } else {\n      el.addEventListener(type, func, capture);\n    }\n  },\n  off: function off(el, type, func) {\n    var capture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    el.removeEventListener(type, func, capture);\n  }\n};\n\nvar loadImageAsync = function loadImageAsync(item, resolve, reject) {\n  var image = new Image();\n\n  if (!item || !item.src) {\n    var err = new Error('image src is required');\n    return reject(err);\n  }\n\n  if (item.cors) {\n    image.crossOrigin = item.cors;\n  }\n\n  image.src = item.src;\n\n  image.onload = function () {\n    resolve({\n      naturalHeight: image.naturalHeight,\n      naturalWidth: image.naturalWidth,\n      src: image.src\n    });\n    image = null;\n  };\n\n  image.onerror = function (e) {\n    reject(e);\n  };\n}; // keyof CSSStyleDeclaration\n\n\nvar style = function style(el, prop) {\n  return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\n\nvar overflow = function overflow(el) {\n  return style(el, 'overflow') + style(el, 'overflowY') + style(el, 'overflowX');\n};\n\nvar scrollParent = function scrollParent(el) {\n  if (!inBrowser) return;\n\n  if (!(el instanceof Element)) {\n    return window;\n  }\n\n  var parent = el;\n\n  while (parent) {\n    if (parent === document.body || parent === document.documentElement) {\n      break;\n    }\n\n    if (!parent.parentNode) {\n      break;\n    }\n\n    if (/(scroll|auto)/.test(overflow(parent))) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return window;\n};\n\nfunction noop() {}\n\nvar ImageCache = /*#__PURE__*/function () {\n  function ImageCache(max) {\n    _classCallCheck(this, ImageCache);\n\n    this.max = max || 100;\n    this._caches = [];\n  }\n\n  _createClass(ImageCache, [{\n    key: \"has\",\n    value: function has(key) {\n      return this._caches.indexOf(key) > -1;\n    }\n  }, {\n    key: \"add\",\n    value: function add(key) {\n      if (this.has(key)) return;\n\n      this._caches.push(key);\n\n      if (this._caches.length > this.max) {\n        this.free();\n      }\n    }\n  }, {\n    key: \"free\",\n    value: function free() {\n      this._caches.shift();\n    }\n  }]);\n\n  return ImageCache;\n}(); // el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\n\n\nvar ReactiveListener = /*#__PURE__*/function () {\n  function ReactiveListener(el, src, error, loading, bindType, $parent, options, cors, elRenderer, imageCache) {\n    _classCallCheck(this, ReactiveListener);\n\n    this.el = el;\n    this.src = src;\n    this.error = error;\n    this.loading = loading;\n    this.bindType = bindType;\n    this.attempt = 0;\n    this.cors = cors;\n    this.naturalHeight = 0;\n    this.naturalWidth = 0;\n    this.options = options;\n    this.rect = {};\n    this.$parent = $parent;\n    this.elRenderer = elRenderer;\n    this._imageCache = imageCache;\n    this.performanceData = {\n      init: Date.now(),\n      loadStart: 0,\n      loadEnd: 0\n    };\n    this.filter();\n    this.initState();\n    this.render('loading', false);\n  }\n  /*\r\n   * init listener state\r\n   * @return\r\n   */\n\n\n  _createClass(ReactiveListener, [{\n    key: \"initState\",\n    value: function initState() {\n      if ('dataset' in this.el) {\n        this.el.dataset.src = this.src;\n      } else {\n        this.el.setAttribute('data-src', this.src);\n      }\n\n      this.state = {\n        loading: false,\n        error: false,\n        loaded: false,\n        rendered: false\n      };\n    }\n    /*\r\n     * record performance\r\n     * @return\r\n     */\n\n  }, {\n    key: \"record\",\n    value: function record(event) {\n      this.performanceData[event] = Date.now();\n    }\n    /*\r\n     * update image listener data\r\n     * @param  {String} image uri\r\n     * @param  {String} loading image uri\r\n     * @param  {String} error image uri\r\n     * @return\r\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(option) {\n      var oldSrc = this.src;\n      this.src = option.src;\n      this.loading = option.loading;\n      this.error = option.error;\n      this.filter();\n\n      if (oldSrc !== this.src) {\n        this.attempt = 0;\n        this.initState();\n      }\n    }\n    /*\r\n     * get el node rect\r\n     * @return\r\n     */\n\n  }, {\n    key: \"getRect\",\n    value: function getRect() {\n      this.rect = this.el.getBoundingClientRect();\n    }\n    /*\r\n     * check el is in view\r\n     * @return {Boolean} el is in view\r\n     */\n\n  }, {\n    key: \"checkInView\",\n    value: function checkInView() {\n      this.getRect();\n      return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n    }\n    /*\r\n     * listener filter\r\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter() {\n      for (var key in this.options.filter) {\n        this.options.filter[key](this, this.options);\n      }\n    }\n    /*\r\n     * render loading first\r\n     * @params cb:Function\r\n     * @return\r\n     */\n\n  }, {\n    key: \"renderLoading\",\n    value: function renderLoading(cb) {\n      var _this = this;\n\n      this.state.loading = true;\n      loadImageAsync({\n        src: this.loading,\n        cors: this.cors\n      }, function () {\n        _this.render('loading', false);\n\n        _this.state.loading = false;\n        cb();\n      }, function () {\n        // handler `loading image` load failed\n        cb();\n        _this.state.loading = false;\n        if (!_this.options.silent) console.warn(\"VueLazyload log: load failed with loading image(\".concat(_this.loading, \")\"));\n      });\n    }\n    /*\r\n     * try load image and  render it\r\n     * @return\r\n     */\n\n  }, {\n    key: \"load\",\n    value: function load() {\n      var _this2 = this;\n\n      var onFinish = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n\n      if (this.attempt > this.options.attempt - 1 && this.state.error) {\n        if (!this.options.silent) console.log(\"VueLazyload log: \".concat(this.src, \" tried too more than \").concat(this.options.attempt, \" times\"));\n        onFinish();\n        return;\n      }\n\n      if (this.state.rendered && this.state.loaded) return;\n\n      if (this._imageCache.has(this.src)) {\n        this.state.loaded = true;\n        this.render('loaded', true);\n        this.state.rendered = true;\n        return onFinish();\n      }\n\n      this.renderLoading(function () {\n        _this2.attempt++;\n        _this2.options.adapter.beforeLoad && _this2.options.adapter.beforeLoad(_this2, _this2.options);\n\n        _this2.record('loadStart');\n\n        loadImageAsync({\n          src: _this2.src,\n          cors: _this2.cors\n        }, function (data) {\n          _this2.naturalHeight = data.naturalHeight;\n          _this2.naturalWidth = data.naturalWidth;\n          _this2.state.loaded = true;\n          _this2.state.error = false;\n\n          _this2.record('loadEnd');\n\n          _this2.render('loaded', false);\n\n          _this2.state.rendered = true;\n\n          _this2._imageCache.add(_this2.src);\n\n          onFinish();\n        }, function (err) {\n          !_this2.options.silent && console.error(err);\n          _this2.state.error = true;\n          _this2.state.loaded = false;\n\n          _this2.render('error', false);\n        });\n      });\n    }\n    /*\r\n     * render image\r\n     * @param  {String} state to render // ['loading', 'src', 'error']\r\n     * @param  {String} is form cache\r\n     * @return\r\n     */\n\n  }, {\n    key: \"render\",\n    value: function render(state, cache) {\n      this.elRenderer(this, state, cache);\n    }\n    /*\r\n     * output performance data\r\n     * @return {Object} performance data\r\n     */\n\n  }, {\n    key: \"performance\",\n    value: function performance() {\n      var state = 'loading';\n      var time = 0;\n\n      if (this.state.loaded) {\n        state = 'loaded';\n        time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n      }\n\n      if (this.state.error) state = 'error';\n      return {\n        src: this.src,\n        state: state,\n        time: time\n      };\n    }\n    /*\r\n     * $destroy\r\n     * @return\r\n     */\n\n  }, {\n    key: \"$destroy\",\n    value: function $destroy() {\n      this.el = null;\n      this.src = '';\n      this.error = null;\n      this.loading = '';\n      this.bindType = null;\n      this.attempt = 0;\n    }\n  }]);\n\n  return ReactiveListener;\n}();\n\nvar DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nvar DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nvar DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: '0px',\n  threshold: 0\n};\n\nvar Lazy = /*#__PURE__*/function () {\n  function Lazy(_ref) {\n    var preLoad = _ref.preLoad,\n        error = _ref.error,\n        throttleWait = _ref.throttleWait,\n        preLoadTop = _ref.preLoadTop,\n        dispatchEvent = _ref.dispatchEvent,\n        loading = _ref.loading,\n        attempt = _ref.attempt,\n        _ref$silent = _ref.silent,\n        silent = _ref$silent === void 0 ? true : _ref$silent,\n        scale = _ref.scale,\n        listenEvents = _ref.listenEvents,\n        filter = _ref.filter,\n        adapter = _ref.adapter,\n        observer = _ref.observer,\n        observerOptions = _ref.observerOptions;\n\n    _classCallCheck(this, Lazy);\n\n    this.version = '\"3.0.0-rc.1\"';\n    this.lazyContainerMananger = null;\n    this.mode = modeType.event;\n    this.ListenerQueue = [];\n    this.TargetIndex = 0;\n    this.TargetQueue = [];\n    this.options = {\n      silent: silent,\n      dispatchEvent: !!dispatchEvent,\n      throttleWait: throttleWait || 200,\n      preLoad: preLoad || 1.3,\n      preLoadTop: preLoadTop || 0,\n      error: error || DEFAULT_URL,\n      loading: loading || DEFAULT_URL,\n      attempt: attempt || 3,\n      scale: scale || getDPR(scale),\n      listenEvents: listenEvents || DEFAULT_EVENTS,\n      supportWebp: supportWebp(),\n      filter: filter || {},\n      adapter: adapter || {},\n      observer: !!observer,\n      observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n    };\n\n    this._initEvent();\n\n    this._imageCache = new ImageCache(200);\n    this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n    this.setMode(this.options.observer ? modeType.observer : modeType.event);\n  }\n  /**\r\n   * output listener's load performance\r\n   * @return {Array}\r\n   */\n\n\n  _createClass(Lazy, [{\n    key: \"performance\",\n    value: function performance() {\n      var list = [];\n      this.ListenerQueue.map(function (item) {\n        return list.push(item.performance());\n      });\n      return list;\n    }\n    /*\r\n     * add lazy component to queue\r\n     * @param  {Vue} vm lazy component instance\r\n     * @return\r\n     */\n\n  }, {\n    key: \"addLazyBox\",\n    value: function addLazyBox(vm) {\n      this.ListenerQueue.push(vm);\n\n      if (inBrowser) {\n        this._addListenerTarget(window);\n\n        this._observer && this._observer.observe(vm.el);\n\n        if (vm.$el && vm.$el.parentNode) {\n          this._addListenerTarget(vm.$el.parentNode);\n        }\n      }\n    }\n    /*\r\n     * add image listener to queue\r\n     * @param  {DOM} el\r\n     * @param  {object} binding vue directive binding\r\n     * @param  {vnode} vnode vue directive vnode\r\n     * @return\r\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(el, binding, vnode) {\n      var _this3 = this;\n\n      if (this.ListenerQueue.some(function (item) {\n        return item.el === el;\n      })) {\n        this.update(el, binding);\n        return nextTick(this.lazyLoadHandler);\n      }\n\n      var _this$_valueFormatter = this._valueFormatter(binding.value),\n          src = _this$_valueFormatter.src,\n          loading = _this$_valueFormatter.loading,\n          error = _this$_valueFormatter.error,\n          cors = _this$_valueFormatter.cors;\n\n      nextTick(function () {\n        src = getBestSelectionFromSrcset(el, _this3.options.scale) || src;\n        _this3._observer && _this3._observer.observe(el);\n        var container = Object.keys(binding.modifiers)[0];\n        var $parent;\n\n        if (container) {\n          $parent = binding.instance.$refs[container]; // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n\n          $parent = $parent ? $parent.el || $parent : document.getElementById(container);\n        }\n\n        if (!$parent) {\n          $parent = scrollParent(el);\n        }\n\n        var newListener = new ReactiveListener(el, src, error, loading, binding.arg, $parent, _this3.options, cors, _this3._elRenderer.bind(_this3), _this3._imageCache);\n\n        _this3.ListenerQueue.push(newListener);\n\n        if (inBrowser) {\n          _this3._addListenerTarget(window);\n\n          _this3._addListenerTarget($parent);\n        }\n\n        nextTick(_this3.lazyLoadHandler);\n      });\n    }\n    /**\r\n    * update image src\r\n    * @param  {DOM} el\r\n    * @param  {object} vue directive binding\r\n    * @return\r\n    */\n\n  }, {\n    key: \"update\",\n    value: function update(el, binding, vnode) {\n      var _this$_valueFormatter2 = this._valueFormatter(binding.value),\n          src = _this$_valueFormatter2.src,\n          loading = _this$_valueFormatter2.loading,\n          error = _this$_valueFormatter2.error;\n\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n      var exist = this.ListenerQueue.find(function (item) {\n        return item.el === el;\n      });\n\n      if (!exist) {\n        if (el.getAttribute('lazy') !== 'loaded' || el.dataset.src !== src) {\n          this.add(el, binding, vnode);\n        }\n      } else {\n        exist.update({\n          src: src,\n          loading: loading,\n          error: error\n        });\n      }\n\n      if (this._observer) {\n        this._observer.unobserve(el);\n\n        this._observer.observe(el);\n      }\n\n      nextTick(this.lazyLoadHandler);\n    }\n    /**\r\n    * remove listener form list\r\n    * @param  {DOM} el\r\n    * @return\r\n    */\n\n  }, {\n    key: \"remove\",\n    value: function remove(el) {\n      if (!el) return;\n      this._observer && this._observer.unobserve(el);\n      var existItem = this.ListenerQueue.find(function (item) {\n        return item.el === el;\n      });\n\n      if (existItem) {\n        this._removeListenerTarget(existItem.$parent);\n\n        this._removeListenerTarget(window);\n\n        _remove(this.ListenerQueue, existItem);\n\n        existItem.$destroy && existItem.$destroy();\n      }\n    }\n    /*\r\n     * remove lazy components form list\r\n     * @param  {Vue} vm Vue instance\r\n     * @return\r\n     */\n\n  }, {\n    key: \"removeComponent\",\n    value: function removeComponent(vm) {\n      if (!vm) return;\n\n      _remove(this.ListenerQueue, vm);\n\n      this._observer && this._observer.unobserve(vm.el);\n\n      if (vm.$parent && vm.$el.parentNode) {\n        this._removeListenerTarget(vm.$el.parentNode);\n      }\n\n      this._removeListenerTarget(window);\n    }\n  }, {\n    key: \"setMode\",\n    value: function setMode(mode) {\n      var _this4 = this;\n\n      if (!hasIntersectionObserver && mode === modeType.observer) {\n        mode = modeType.event;\n      }\n\n      this.mode = mode; // event or observer\n\n      if (mode === modeType.event) {\n        if (this._observer) {\n          this.ListenerQueue.forEach(function (listener) {\n            _this4._observer.unobserve(listener.el);\n          });\n          this._observer = null;\n        }\n\n        this.TargetQueue.forEach(function (target) {\n          _this4._initListen(target.el, true);\n        });\n      } else {\n        this.TargetQueue.forEach(function (target) {\n          _this4._initListen(target.el, false);\n        });\n\n        this._initIntersectionObserver();\n      }\n    }\n    /*\r\n    *** Private functions ***\r\n    */\n\n    /*\r\n     * add listener target\r\n     * @param  {DOM} el listener target\r\n     * @return\r\n     */\n\n  }, {\n    key: \"_addListenerTarget\",\n    value: function _addListenerTarget(el) {\n      if (!el) return;\n      var target = this.TargetQueue.find(function (target) {\n        return target.el === el;\n      });\n\n      if (!target) {\n        target = {\n          el: el,\n          id: ++this.TargetIndex,\n          childrenCount: 1,\n          listened: true\n        };\n        this.mode === modeType.event && this._initListen(target.el, true);\n        this.TargetQueue.push(target);\n      } else {\n        target.childrenCount++;\n      }\n\n      return this.TargetIndex;\n    }\n    /*\r\n     * remove listener target or reduce target childrenCount\r\n     * @param  {DOM} el or window\r\n     * @return\r\n     */\n\n  }, {\n    key: \"_removeListenerTarget\",\n    value: function _removeListenerTarget(el) {\n      var _this5 = this;\n\n      this.TargetQueue.forEach(function (target, index) {\n        if (target.el === el) {\n          target.childrenCount--;\n\n          if (!target.childrenCount) {\n            _this5._initListen(target.el, false);\n\n            _this5.TargetQueue.splice(index, 1);\n\n            target = null;\n          }\n        }\n      });\n    }\n    /*\r\n     * add or remove eventlistener\r\n     * @param  {DOM} el DOM or Window\r\n     * @param  {boolean} start flag\r\n     * @return\r\n     */\n\n  }, {\n    key: \"_initListen\",\n    value: function _initListen(el, start) {\n      var _this6 = this;\n\n      this.options.listenEvents.forEach(function (evt) {\n        return _[start ? 'on' : 'off'](el, evt, _this6.lazyLoadHandler);\n      });\n    }\n  }, {\n    key: \"_initEvent\",\n    value: function _initEvent() {\n      var _this7 = this;\n\n      this.Event = {\n        listeners: {\n          loading: [],\n          loaded: [],\n          error: []\n        }\n      };\n\n      this.$on = function (event, func) {\n        if (!_this7.Event.listeners[event]) _this7.Event.listeners[event] = [];\n\n        _this7.Event.listeners[event].push(func);\n      };\n\n      this.$once = function (event, func) {\n        var vm = _this7;\n\n        function on() {\n          vm.$off(event, on);\n          func.apply(vm, arguments);\n        }\n\n        _this7.$on(event, on);\n      };\n\n      this.$off = function (event, func) {\n        if (!func) {\n          if (!_this7.Event.listeners[event]) return;\n          _this7.Event.listeners[event].length = 0;\n          return;\n        }\n\n        _remove(_this7.Event.listeners[event], func);\n      };\n\n      this.$emit = function (event, context, inCache) {\n        if (!_this7.Event.listeners[event]) return;\n\n        _this7.Event.listeners[event].forEach(function (func) {\n          return func(context, inCache);\n        });\n      };\n    }\n    /**\r\n     * find nodes which in viewport and trigger load\r\n     * @return\r\n     */\n\n  }, {\n    key: \"_lazyLoadHandler\",\n    value: function _lazyLoadHandler() {\n      var _this8 = this;\n\n      var freeList = [];\n      this.ListenerQueue.forEach(function (listener, index) {\n        if (!listener.el || !listener.el.parentNode || listener.state.loaded) {\n          freeList.push(listener);\n        }\n\n        var catIn = listener.checkInView();\n        if (!catIn) return;\n        if (!listener.state.loaded) listener.load();\n      });\n      freeList.forEach(function (item) {\n        _remove(_this8.ListenerQueue, item);\n\n        item.$destroy && item.$destroy();\n      });\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * set mode to observer\r\n    * @return\r\n    */\n\n  }, {\n    key: \"_initIntersectionObserver\",\n    value: function _initIntersectionObserver() {\n      var _this9 = this;\n\n      if (!hasIntersectionObserver) return;\n      this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n\n      if (this.ListenerQueue.length) {\n        this.ListenerQueue.forEach(function (listener) {\n          _this9._observer.observe(listener.el);\n        });\n      }\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * @param {Array<IntersectionObserverEntry>} entries\r\n    * @return\r\n    */\n\n  }, {\n    key: \"_observerHandler\",\n    value: function _observerHandler(entries) {\n      var _this10 = this;\n\n      entries.forEach(function (entry) {\n        if (entry.isIntersecting) {\n          _this10.ListenerQueue.forEach(function (listener) {\n            if (listener.el === entry.target) {\n              if (listener.state.loaded) return _this10._observer.unobserve(listener.el);\n              listener.load();\n            }\n          });\n        }\n      });\n    }\n    /**\r\n    * set element attribute with image'url and state\r\n    * @param  {ReactiveListener} lazyload listener object\r\n    * @param  {TeventType} state will be rendered\r\n    * @param  {bool} inCache  is rendered from cache\r\n    * @return\r\n    */\n\n  }, {\n    key: \"_elRenderer\",\n    value: function _elRenderer(listener, state, cache) {\n      if (!listener.el) return;\n      var el = listener.el,\n          bindType = listener.bindType;\n      var src;\n\n      switch (state) {\n        case 'loading':\n          src = listener.loading;\n          break;\n\n        case 'error':\n          src = listener.error;\n          break;\n\n        default:\n          src = listener.src;\n          break;\n      }\n\n      if (bindType) {\n        // @ts-ignore\n        el.style[bindType] = 'url(\"' + src + '\")';\n      } else if (el.getAttribute('src') !== src) {\n        el.setAttribute('src', src);\n      }\n\n      el.setAttribute('lazy', state);\n      this.$emit(state, listener, cache);\n      this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n\n      if (this.options.dispatchEvent) {\n        var event = new CustomEvent(state, {\n          detail: listener\n        });\n        el.dispatchEvent(event);\n      }\n    }\n  }, {\n    key: \"_valueFormatter\",\n    value: function _valueFormatter(value) {\n      if (_typeof(value) === 'object') {\n        if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n        return {\n          src: value.src,\n          loading: value.loading || this.options.loading,\n          error: value.error || this.options.error,\n          cors: this.options.cors\n        };\n      }\n\n      return {\n        src: value,\n        loading: this.options.loading,\n        error: this.options.error,\n        cors: this.options.cors\n      };\n    }\n  }]);\n\n  return Lazy;\n}();\n\nvar useCheckInView = function useCheckInView(el, preLoad) {\n  var rect = reactive({});\n\n  var getRect = function getRect() {\n    rect = el.value.getBoundingClientRect();\n  };\n\n  var checkInView = function checkInView() {\n    getRect();\n    return inBrowser && rect.top < window.innerHeight * preLoad && rect.bottom > 0 && rect.left < window.innerWidth * preLoad && rect.right > 0;\n  };\n\n  return {\n    rect: rect,\n    checkInView: checkInView\n  };\n};\n\nvar LazyComponent = function LazyComponent(lazy) {\n  return defineComponent({\n    props: {\n      tag: {\n        type: String,\n        default: 'div'\n      }\n    },\n    emits: ['show'],\n    setup: function setup(props, _ref2) {\n      var emit = _ref2.emit,\n          slots = _ref2.slots;\n      var el = ref();\n      var state = reactive({\n        loaded: false,\n        error: false,\n        attempt: 0\n      });\n      var show = ref(false);\n\n      var _useCheckInView = useCheckInView(el, lazy.options.preLoad),\n          rect = _useCheckInView.rect,\n          checkInView = _useCheckInView.checkInView;\n\n      var load = function load() {\n        show.value = true;\n        state.loaded = true;\n        emit('show', show.value);\n      };\n\n      var vm = computed(function () {\n        return {\n          el: el.value,\n          rect: rect,\n          checkInView: checkInView,\n          load: load,\n          state: state\n        };\n      });\n      onMounted(function () {\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      });\n      onUnmounted(function () {\n        lazy.removeComponent(vm.value);\n      });\n      return function () {\n        var _a;\n\n        return createVNode(props.tag, {\n          ref: el\n        }, [show.value && ((_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots))]);\n      };\n    }\n  });\n};\n\nvar LazyContainerMananger = /*#__PURE__*/function () {\n  function LazyContainerMananger(lazy) {\n    _classCallCheck(this, LazyContainerMananger);\n\n    this.lazy = lazy;\n    lazy.lazyContainerMananger = this;\n    this._queue = [];\n  }\n\n  _createClass(LazyContainerMananger, [{\n    key: \"bind\",\n    value: function bind(el, binding, vnode) {\n      var container = new LazyContainer(el, binding, vnode, this.lazy);\n\n      this._queue.push(container);\n    }\n  }, {\n    key: \"update\",\n    value: function update(el, binding, vnode) {\n      var container = this._queue.find(function (item) {\n        return item.el === el;\n      });\n\n      if (!container) return;\n      container.update(el, binding);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(el, binding, vnode) {\n      var container = this._queue.find(function (item) {\n        return item.el === el;\n      });\n\n      if (!container) return;\n      container.clear();\n\n      _remove(this._queue, container);\n    }\n  }]);\n\n  return LazyContainerMananger;\n}();\n\nvar defaultOptions = {\n  selector: 'img',\n  error: '',\n  loading: ''\n};\n\nvar LazyContainer = /*#__PURE__*/function () {\n  function LazyContainer(el, binding, vnode, lazy) {\n    _classCallCheck(this, LazyContainer);\n\n    this.el = el;\n    this.vnode = vnode;\n    this.binding = binding;\n    this.options = {};\n    this.lazy = lazy;\n    this._queue = [];\n    this.update(el, binding);\n  }\n\n  _createClass(LazyContainer, [{\n    key: \"update\",\n    value: function update(el, binding) {\n      var _this11 = this;\n\n      this.el = el;\n      this.options = assignDeep({}, defaultOptions, binding.value);\n      var imgs = this.getImgs();\n      imgs.forEach(function (el) {\n        _this11.lazy.add(el, assignDeep({}, _this11.binding, {\n          value: {\n            src: el.getAttribute('data-src') || el.dataset.src,\n            error: el.getAttribute('data-error') || el.dataset.error || _this11.options.error,\n            loading: el.getAttribute('data-loading') || el.dataset.loading || _this11.options.loading\n          }\n        }), _this11.vnode);\n      });\n    }\n  }, {\n    key: \"getImgs\",\n    value: function getImgs() {\n      return Array.from(this.el.querySelectorAll(this.options.selector));\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this12 = this;\n\n      var imgs = this.getImgs();\n      imgs.forEach(function (el) {\n        return _this12.lazy.remove(el);\n      });\n      this.vnode = null;\n      this.binding = null;\n      this.lazy = null;\n    }\n  }]);\n\n  return LazyContainer;\n}();\n\nvar LazyImage = function LazyImage(lazy) {\n  return defineComponent({\n    setup: function setup(props, _ref3) {\n      var slots = _ref3.slots;\n      var el = ref();\n      var options = reactive({\n        src: '',\n        error: '',\n        loading: '',\n        attempt: lazy.options.attempt\n      });\n      var state = reactive({\n        loaded: false,\n        error: false,\n        attempt: 0\n      });\n\n      var _useCheckInView2 = useCheckInView(el, lazy.options.preLoad),\n          rect = _useCheckInView2.rect,\n          checkInView = _useCheckInView2.checkInView;\n\n      var renderSrc = ref('');\n\n      var load = function load() {\n        var onFinish = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n\n        if (state.attempt > options.attempt - 1 && state.error) {\n          if (!lazy.options.silent) console.log(\"VueLazyload log: \".concat(options.src, \" tried too more than \").concat(options.attempt, \" times\"));\n          return onFinish();\n        }\n\n        var src = options.src;\n        loadImageAsync({\n          src: src\n        }, function (_ref4) {\n          var src = _ref4.src;\n          renderSrc.value = src;\n          state.loaded = true;\n        }, function () {\n          state.attempt++;\n          renderSrc.value = options.error;\n          state.error = true;\n        });\n      };\n\n      var vm = computed(function () {\n        return {\n          el: el.value,\n          rect: rect,\n          checkInView: checkInView,\n          load: load,\n          state: state\n        };\n      });\n      onMounted(function () {\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      });\n      onUnmounted(function () {\n        lazy.removeComponent(vm.value);\n      });\n\n      var init = function init() {\n        var _lazy$_valueFormatter = lazy._valueFormatter(props.src),\n            src = _lazy$_valueFormatter.src,\n            loading = _lazy$_valueFormatter.loading,\n            error = _lazy$_valueFormatter.error;\n\n        state.loaded = false;\n        options.src = src;\n        options.error = error;\n        options.loading = loading;\n        renderSrc.value = options.loading;\n      };\n\n      watch(function () {\n        return props.src;\n      }, function () {\n        init();\n        lazy.addLazyBox(vm.value);\n        lazy.lazyLoadHandler();\n      }, {\n        immediate: true\n      });\n      return function () {\n        var _a;\n\n        return createVNode(props.tag || 'img', {\n          src: renderSrc.value,\n          ref: el\n        }, [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n      };\n    }\n  });\n};\n\nvar index = {\n  /*\r\n  * install function\r\n  * @param  {Vue} Vue\r\n  * @param  {object} options lazyload options\r\n  */\n  install: function install(Vue) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var lazy = new Lazy(options);\n    var lazyContainer = new LazyContainerMananger(lazy);\n    var vueVersion = Number(Vue.version.split('.')[0]);\n    if (vueVersion < 3) return new Error('Vue version at least 3.0');\n    Vue.config.globalProperties.$Lazyload = lazy;\n    Vue.provide('Lazyload', lazy);\n\n    if (options.lazyComponent) {\n      Vue.component('lazy-component', LazyComponent(lazy));\n    }\n\n    if (options.lazyImage) {\n      Vue.component('lazy-image', LazyImage(lazy));\n    }\n\n    Vue.directive('lazy', {\n      beforeMount: lazy.add.bind(lazy),\n      beforeUpdate: lazy.update.bind(lazy),\n      updated: lazy.lazyLoadHandler.bind(lazy),\n      unmounted: lazy.remove.bind(lazy)\n    });\n    Vue.directive('lazy-container', {\n      beforeMount: lazyContainer.bind.bind(lazyContainer),\n      updated: lazyContainer.update.bind(lazyContainer),\n      unmounted: lazyContainer.unbind.bind(lazyContainer)\n    });\n  }\n};\nexport { index as default };","map":{"version":3,"sources":["C:/Users/尹木星辰/Desktop/Vue_project/Project_vue/node_modules/vue-lazyload/vue-lazyload.esm.js"],"names":["nextTick","reactive","defineComponent","ref","computed","onMounted","onUnmounted","createVNode","watch","createCommonjsModule","fn","module","exports","assignSymbols$1","toString","Object","prototype","isEnumerable","propertyIsEnumerable","getSymbols","getOwnPropertySymbols","target","isObject","TypeError","args","length","Symbol","arg","names","key","call","val","Array","isArray","assignSymbols$2","freeze","__proto__","__moduleExports","assignSymbols","assignDeep","isValidKey","assign","i","isPrimitive","keys","inBrowser","window","hasIntersectionObserver","checkIntersectionObserver","IntersectionObserverEntry","defineProperty","get","intersectionRatio","modeType","event","observer","remove","arr","item","index","indexOf","splice","getBestSelectionFromSrcset","el","scale","tagName","getAttribute","options","trim","split","result","container","parentNode","containerWidth","offsetWidth","spaceIndex","tmpSrc","tmpWidth","forEach","lastIndexOf","substr","parseInt","push","sort","a","b","bestSelectedSrc","tmpOption","next","getDPR","devicePixelRatio","supportWebp","support","checkWebpFeature","feature","callback","kTestImages","lossy","lossless","alpha","animation","img","Image","onload","width","height","onerror","src","isSupported","throttle","action","delay","timeout","lastRun","elapsed","Date","now","context","arguments","runCallback","apply","setTimeout","testSupportsPassive","opts","addEventListener","noop","e","supportsPassive","_","on","type","func","capture","passive","off","removeEventListener","loadImageAsync","resolve","reject","image","err","Error","cors","crossOrigin","naturalHeight","naturalWidth","style","prop","getComputedStyle","getPropertyValue","overflow","scrollParent","Element","parent","document","body","documentElement","test","ImageCache","max","_caches","has","free","shift","ReactiveListener","error","loading","bindType","$parent","elRenderer","imageCache","attempt","rect","_imageCache","performanceData","init","loadStart","loadEnd","filter","initState","render","dataset","setAttribute","state","loaded","rendered","option","oldSrc","getBoundingClientRect","getRect","top","innerHeight","preLoad","bottom","preLoadTop","left","innerWidth","right","cb","silent","console","warn","onFinish","log","renderLoading","adapter","beforeLoad","record","data","add","cache","time","DEFAULT_URL","DEFAULT_EVENTS","DEFAULT_OBSERVER_OPTIONS","rootMargin","threshold","Lazy","throttleWait","dispatchEvent","listenEvents","observerOptions","version","lazyContainerMananger","mode","ListenerQueue","TargetIndex","TargetQueue","_initEvent","lazyLoadHandler","_lazyLoadHandler","bind","setMode","list","map","performance","vm","_addListenerTarget","_observer","observe","$el","binding","vnode","some","update","_valueFormatter","value","modifiers","instance","$refs","getElementById","newListener","_elRenderer","exist","find","unobserve","existItem","_removeListenerTarget","$destroy","listener","_initListen","_initIntersectionObserver","id","childrenCount","listened","start","evt","Event","listeners","$on","$once","$off","$emit","inCache","freeList","catIn","checkInView","load","IntersectionObserver","_observerHandler","entries","entry","isIntersecting","CustomEvent","detail","useCheckInView","LazyComponent","lazy","props","tag","String","default","emits","setup","emit","slots","show","addLazyBox","removeComponent","_a","LazyContainerMananger","_queue","LazyContainer","clear","defaultOptions","selector","imgs","getImgs","from","querySelectorAll","LazyImage","renderSrc","immediate","install","Vue","lazyContainer","vueVersion","Number","config","globalProperties","$Lazyload","provide","lazyComponent","component","lazyImage","directive","beforeMount","beforeUpdate","updated","unmounted","unbind"],"mappings":"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","sourcesContent":["/*!\n * Vue-Lazyload.js v3.0.0-rc.1\n * (c) 2022 Awe <hilongjw@gmail.com>\n * Released under the MIT License.\n */\n\nimport { nextTick, reactive, defineComponent, ref, computed, onMounted, onUnmounted, createVNode, watch } from 'vue';\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar assignSymbols$1 = createCommonjsModule(function (module) {\n\n  const toString = Object.prototype.toString;\n  const isEnumerable = Object.prototype.propertyIsEnumerable;\n  const getSymbols = Object.getOwnPropertySymbols;\n\n  module.exports = (target, ...args) => {\n    if (!isObject(target)) {\n      throw new TypeError('expected the first argument to be an object');\n    }\n\n    if (args.length === 0 || typeof Symbol !== 'function' || typeof getSymbols !== 'function') {\n      return target;\n    }\n\n    for (let arg of args) {\n      let names = getSymbols(arg);\n\n      for (let key of names) {\n        if (isEnumerable.call(arg, key)) {\n          target[key] = arg[key];\n        }\n      }\n    }\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]' || Array.isArray(val);\n  }\n});\n\nvar assignSymbols$2 = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\t'default': assignSymbols$1,\n\t__moduleExports: assignSymbols$1\n});\n\nvar assignSymbols = ( assignSymbols$2 && assignSymbols$1 ) || assignSymbols$2;\n\nvar assignDeep = createCommonjsModule(function (module) {\n\n  const toString = Object.prototype.toString;\n\n  const isValidKey = key => {\n    return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n  };\n\n  const assign = module.exports = (target, ...args) => {\n    let i = 0;\n    if (isPrimitive(target)) target = args[i++];\n    if (!target) target = {};\n    for (; i < args.length; i++) {\n      if (isObject(args[i])) {\n        for (const key of Object.keys(args[i])) {\n          if (isValidKey(key)) {\n            if (isObject(target[key]) && isObject(args[i][key])) {\n              assign(target[key], args[i][key]);\n            } else {\n              target[key] = args[i][key];\n            }\n          }\n        }\n        assignSymbols(target, args[i]);\n      }\n    }\n    return target;\n  };\n\n  function isObject(val) {\n    return typeof val === 'function' || toString.call(val) === '[object Object]';\n  }\n\n  function isPrimitive(val) {\n    return typeof val === 'object' ? val === null : typeof val !== 'function';\n  }\n});\n\nconst inBrowser = typeof window !== 'undefined' && window !== null;\nconst hasIntersectionObserver = checkIntersectionObserver();\nfunction checkIntersectionObserver() {\n    if (inBrowser && 'IntersectionObserver' in window && 'IntersectionObserverEntry' in window && 'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n        // Minimal polyfill for Edge 15's lack of `isIntersecting`\n        // See: https://github.com/w3c/IntersectionObserver/issues/211\n        if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n            Object.defineProperty(window.IntersectionObserverEntry.prototype, 'isIntersecting', {\n                get: function () {\n                    return this.intersectionRatio > 0;\n                }\n            });\n        }\n        return true;\n    }\n    return false;\n}\nconst modeType = {\n    event: 'event',\n    observer: 'observer'\n};\nfunction remove(arr, item) {\n    if (!arr.length) return;\n    const index = arr.indexOf(item);\n    if (index > -1) return arr.splice(index, 1);\n}\nfunction getBestSelectionFromSrcset(el, scale) {\n    if (el.tagName !== 'IMG' || !el.getAttribute('data-srcset')) return '';\n    let options = el.getAttribute('data-srcset').trim().split(',');\n    const result = [];\n    const container = el.parentNode;\n    const containerWidth = container.offsetWidth * scale;\n    let spaceIndex;\n    let tmpSrc;\n    let tmpWidth;\n    options.forEach(item => {\n        item = item.trim();\n        spaceIndex = item.lastIndexOf(' ');\n        if (spaceIndex === -1) {\n            tmpSrc = item;\n            tmpWidth = 99999;\n        } else {\n            tmpSrc = item.substr(0, spaceIndex);\n            tmpWidth = parseInt(item.substr(spaceIndex + 1, item.length - spaceIndex - 2), 10);\n        }\n        result.push([tmpWidth, tmpSrc]);\n    });\n    result.sort((a, b) => {\n        if (a[0] < b[0]) {\n            return 1;\n        }\n        if (a[0] > b[0]) {\n            return -1;\n        }\n        if (a[0] === b[0]) {\n            if (b[1].indexOf('.webp', b[1].length - 5) !== -1) {\n                return 1;\n            }\n            if (a[1].indexOf('.webp', a[1].length - 5) !== -1) {\n                return -1;\n            }\n        }\n        return 0;\n    });\n    let bestSelectedSrc = '';\n    let tmpOption;\n    for (let i = 0; i < result.length; i++) {\n        tmpOption = result[i];\n        bestSelectedSrc = tmpOption[1];\n        const next = result[i + 1];\n        if (next && next[0] < containerWidth) {\n            bestSelectedSrc = tmpOption[1];\n            break;\n        } else if (!next) {\n            bestSelectedSrc = tmpOption[1];\n            break;\n        }\n    }\n    return bestSelectedSrc;\n}\nconst getDPR = (scale = 1) => inBrowser ? window.devicePixelRatio || scale : scale;\n// https://developers.google.com/speed/webp/faq#how_can_i_detect_browser_support_using_javascript\nfunction supportWebp() {\n    if (!inBrowser) return false;\n    let support = true;\n    function checkWebpFeature(feature, callback) {\n        const kTestImages = {\n            lossy: 'UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA',\n            lossless: 'UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==',\n            alpha: 'UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==',\n            animation: 'UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA'\n        };\n        const img = new Image();\n        img.onload = function () {\n            const result = img.width > 0 && img.height > 0;\n            callback(result);\n        };\n        img.onerror = function () {\n            // eslint-disable-next-line node/no-callback-literal\n            callback(false);\n        };\n        img.src = 'data:image/webp;base64,' + kTestImages[feature];\n    }\n    checkWebpFeature('lossy', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('lossless', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('alpha', isSupported => {\n        support = isSupported;\n    });\n    checkWebpFeature('animation', isSupported => {\n        support = isSupported;\n    });\n    return support;\n}\nfunction throttle(action, delay) {\n    let timeout = null;\n    let lastRun = 0;\n    return function () {\n        if (timeout) {\n            return;\n        }\n        const elapsed = Date.now() - lastRun;\n        // @ts-ignore\n        const context = this;\n        const args = arguments;\n        const runCallback = function () {\n            lastRun = Date.now();\n            timeout = false;\n            action.apply(context, args);\n        };\n        if (elapsed >= delay) {\n            runCallback();\n        } else {\n            timeout = setTimeout(runCallback, delay);\n        }\n    };\n}\nfunction testSupportsPassive() {\n    if (!inBrowser) return false;\n    let support = false;\n    try {\n        const opts = Object.defineProperty({}, 'passive', {\n            get: function () {\n                support = true;\n            }\n        });\n        window.addEventListener('test', noop, opts);\n    } catch (e) {}\n    return support;\n}\nconst supportsPassive = testSupportsPassive();\nconst _ = {\n    on(el, type, func, capture = false) {\n        if (supportsPassive) {\n            el.addEventListener(type, func, {\n                capture: capture,\n                passive: true\n            });\n        } else {\n            el.addEventListener(type, func, capture);\n        }\n    },\n    off(el, type, func, capture = false) {\n        el.removeEventListener(type, func, capture);\n    }\n};\nconst loadImageAsync = (item, resolve, reject) => {\n    let image = new Image();\n    if (!item || !item.src) {\n        const err = new Error('image src is required');\n        return reject(err);\n    }\n    if (item.cors) {\n        image.crossOrigin = item.cors;\n    }\n    image.src = item.src;\n    image.onload = function () {\n        resolve({\n            naturalHeight: image.naturalHeight,\n            naturalWidth: image.naturalWidth,\n            src: image.src\n        });\n        image = null;\n    };\n    image.onerror = function (e) {\n        reject(e);\n    };\n};\n// keyof CSSStyleDeclaration\nconst style = (el, prop) => {\n    return typeof getComputedStyle !== 'undefined' ? getComputedStyle(el, null).getPropertyValue(prop) : el.style[prop];\n};\nconst overflow = el => {\n    return style(el, 'overflow') + style(el, 'overflowY') + style(el, 'overflowX');\n};\nconst scrollParent = el => {\n    if (!inBrowser) return;\n    if (!(el instanceof Element)) {\n        return window;\n    }\n    let parent = el;\n    while (parent) {\n        if (parent === document.body || parent === document.documentElement) {\n            break;\n        }\n        if (!parent.parentNode) {\n            break;\n        }\n        if (/(scroll|auto)/.test(overflow(parent))) {\n            return parent;\n        }\n        parent = parent.parentNode;\n    }\n    return window;\n};\nfunction noop() {}\nclass ImageCache {\n    constructor(max) {\n        this.max = max || 100;\n        this._caches = [];\n    }\n    has(key) {\n        return this._caches.indexOf(key) > -1;\n    }\n    add(key) {\n        if (this.has(key)) return;\n        this._caches.push(key);\n        if (this._caches.length > this.max) {\n            this.free();\n        }\n    }\n    free() {\n        this._caches.shift();\n    }\n}\n\n// el: {\n//     state,\n//     src,\n//     error,\n//     loading\n// }\nclass ReactiveListener {\n    constructor(el, src, error, loading, bindType, $parent, options, cors, elRenderer, imageCache) {\n        this.el = el;\n        this.src = src;\n        this.error = error;\n        this.loading = loading;\n        this.bindType = bindType;\n        this.attempt = 0;\n        this.cors = cors;\n        this.naturalHeight = 0;\n        this.naturalWidth = 0;\n        this.options = options;\n        this.rect = {};\n        this.$parent = $parent;\n        this.elRenderer = elRenderer;\n        this._imageCache = imageCache;\n        this.performanceData = {\n            init: Date.now(),\n            loadStart: 0,\n            loadEnd: 0\n        };\n        this.filter();\n        this.initState();\n        this.render('loading', false);\n    }\n    /*\r\n     * init listener state\r\n     * @return\r\n     */\n    initState() {\n        if ('dataset' in this.el) {\n            this.el.dataset.src = this.src;\n        } else {\n            this.el.setAttribute('data-src', this.src);\n        }\n        this.state = {\n            loading: false,\n            error: false,\n            loaded: false,\n            rendered: false\n        };\n    }\n    /*\r\n     * record performance\r\n     * @return\r\n     */\n    record(event) {\n        this.performanceData[event] = Date.now();\n    }\n    /*\r\n     * update image listener data\r\n     * @param  {String} image uri\r\n     * @param  {String} loading image uri\r\n     * @param  {String} error image uri\r\n     * @return\r\n     */\n    update(option) {\n        const oldSrc = this.src;\n        this.src = option.src;\n        this.loading = option.loading;\n        this.error = option.error;\n        this.filter();\n        if (oldSrc !== this.src) {\n            this.attempt = 0;\n            this.initState();\n        }\n    }\n    /*\r\n     * get el node rect\r\n     * @return\r\n     */\n    getRect() {\n        this.rect = this.el.getBoundingClientRect();\n    }\n    /*\r\n     * check el is in view\r\n     * @return {Boolean} el is in view\r\n     */\n    checkInView() {\n        this.getRect();\n        return this.rect.top < window.innerHeight * this.options.preLoad && this.rect.bottom > this.options.preLoadTop && this.rect.left < window.innerWidth * this.options.preLoad && this.rect.right > 0;\n    }\n    /*\r\n     * listener filter\r\n     */\n    filter() {\n        for (const key in this.options.filter) {\n            this.options.filter[key](this, this.options);\n        }\n    }\n    /*\r\n     * render loading first\r\n     * @params cb:Function\r\n     * @return\r\n     */\n    renderLoading(cb) {\n        this.state.loading = true;\n        loadImageAsync({\n            src: this.loading,\n            cors: this.cors\n        }, () => {\n            this.render('loading', false);\n            this.state.loading = false;\n            cb();\n        }, () => {\n            // handler `loading image` load failed\n            cb();\n            this.state.loading = false;\n            if (!this.options.silent) console.warn(`VueLazyload log: load failed with loading image(${this.loading})`);\n        });\n    }\n    /*\r\n     * try load image and  render it\r\n     * @return\r\n     */\n    load(onFinish = noop) {\n        if (this.attempt > this.options.attempt - 1 && this.state.error) {\n            if (!this.options.silent) console.log(`VueLazyload log: ${this.src} tried too more than ${this.options.attempt} times`);\n            onFinish();\n            return;\n        }\n        if (this.state.rendered && this.state.loaded) return;\n        if (this._imageCache.has(this.src)) {\n            this.state.loaded = true;\n            this.render('loaded', true);\n            this.state.rendered = true;\n            return onFinish();\n        }\n        this.renderLoading(() => {\n            this.attempt++;\n            this.options.adapter.beforeLoad && this.options.adapter.beforeLoad(this, this.options);\n            this.record('loadStart');\n            loadImageAsync({\n                src: this.src,\n                cors: this.cors\n            }, data => {\n                this.naturalHeight = data.naturalHeight;\n                this.naturalWidth = data.naturalWidth;\n                this.state.loaded = true;\n                this.state.error = false;\n                this.record('loadEnd');\n                this.render('loaded', false);\n                this.state.rendered = true;\n                this._imageCache.add(this.src);\n                onFinish();\n            }, err => {\n                !this.options.silent && console.error(err);\n                this.state.error = true;\n                this.state.loaded = false;\n                this.render('error', false);\n            });\n        });\n    }\n    /*\r\n     * render image\r\n     * @param  {String} state to render // ['loading', 'src', 'error']\r\n     * @param  {String} is form cache\r\n     * @return\r\n     */\n    render(state, cache) {\n        this.elRenderer(this, state, cache);\n    }\n    /*\r\n     * output performance data\r\n     * @return {Object} performance data\r\n     */\n    performance() {\n        let state = 'loading';\n        let time = 0;\n        if (this.state.loaded) {\n            state = 'loaded';\n            time = (this.performanceData.loadEnd - this.performanceData.loadStart) / 1000;\n        }\n        if (this.state.error) state = 'error';\n        return {\n            src: this.src,\n            state,\n            time\n        };\n    }\n    /*\r\n     * $destroy\r\n     * @return\r\n     */\n    $destroy() {\n        this.el = null;\n        this.src = '';\n        this.error = null;\n        this.loading = '';\n        this.bindType = null;\n        this.attempt = 0;\n    }\n}\n\nconst DEFAULT_URL = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nconst DEFAULT_EVENTS = ['scroll', 'wheel', 'mousewheel', 'resize', 'animationend', 'transitionend', 'touchmove'];\nconst DEFAULT_OBSERVER_OPTIONS = {\n    rootMargin: '0px',\n    threshold: 0\n};\nclass Lazy {\n    constructor({ preLoad, error, throttleWait, preLoadTop, dispatchEvent, loading, attempt, silent = true, scale, listenEvents, filter, adapter, observer, observerOptions }) {\n        this.version = '\"3.0.0-rc.1\"';\n        this.lazyContainerMananger = null;\n        this.mode = modeType.event;\n        this.ListenerQueue = [];\n        this.TargetIndex = 0;\n        this.TargetQueue = [];\n        this.options = {\n            silent: silent,\n            dispatchEvent: !!dispatchEvent,\n            throttleWait: throttleWait || 200,\n            preLoad: preLoad || 1.3,\n            preLoadTop: preLoadTop || 0,\n            error: error || DEFAULT_URL,\n            loading: loading || DEFAULT_URL,\n            attempt: attempt || 3,\n            scale: scale || getDPR(scale),\n            listenEvents: listenEvents || DEFAULT_EVENTS,\n            supportWebp: supportWebp(),\n            filter: filter || {},\n            adapter: adapter || {},\n            observer: !!observer,\n            observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n        };\n        this._initEvent();\n        this._imageCache = new ImageCache(200);\n        this.lazyLoadHandler = throttle(this._lazyLoadHandler.bind(this), this.options.throttleWait);\n        this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n    /**\r\n     * output listener's load performance\r\n     * @return {Array}\r\n     */\n    performance() {\n        const list = [];\n        this.ListenerQueue.map(item => list.push(item.performance()));\n        return list;\n    }\n    /*\r\n     * add lazy component to queue\r\n     * @param  {Vue} vm lazy component instance\r\n     * @return\r\n     */\n    addLazyBox(vm) {\n        this.ListenerQueue.push(vm);\n        if (inBrowser) {\n            this._addListenerTarget(window);\n            this._observer && this._observer.observe(vm.el);\n            if (vm.$el && vm.$el.parentNode) {\n                this._addListenerTarget(vm.$el.parentNode);\n            }\n        }\n    }\n    /*\r\n     * add image listener to queue\r\n     * @param  {DOM} el\r\n     * @param  {object} binding vue directive binding\r\n     * @param  {vnode} vnode vue directive vnode\r\n     * @return\r\n     */\n    add(el, binding, vnode) {\n        if (this.ListenerQueue.some(item => item.el === el)) {\n            this.update(el, binding);\n            return nextTick(this.lazyLoadHandler);\n        }\n        let { src, loading, error, cors } = this._valueFormatter(binding.value);\n        nextTick(() => {\n            src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n            this._observer && this._observer.observe(el);\n            const container = Object.keys(binding.modifiers)[0];\n            let $parent;\n            if (container) {\n                $parent = binding.instance.$refs[container];\n                // if there is container passed in, try ref first, then fallback to getElementById to support the original usage\n                $parent = $parent ? $parent.el || $parent : document.getElementById(container);\n            }\n            if (!$parent) {\n                $parent = scrollParent(el);\n            }\n            const newListener = new ReactiveListener(el, src, error, loading, binding.arg, $parent, this.options, cors, this._elRenderer.bind(this), this._imageCache);\n            this.ListenerQueue.push(newListener);\n            if (inBrowser) {\n                this._addListenerTarget(window);\n                this._addListenerTarget($parent);\n            }\n            nextTick(this.lazyLoadHandler);\n        });\n    }\n    /**\r\n    * update image src\r\n    * @param  {DOM} el\r\n    * @param  {object} vue directive binding\r\n    * @return\r\n    */\n    update(el, binding, vnode) {\n        let { src, loading, error } = this._valueFormatter(binding.value);\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        const exist = this.ListenerQueue.find(item => item.el === el);\n        if (!exist) {\n            if (el.getAttribute('lazy') !== 'loaded' || el.dataset.src !== src) {\n                this.add(el, binding, vnode);\n            }\n        } else {\n            exist.update({\n                src,\n                loading,\n                error\n            });\n        }\n        if (this._observer) {\n            this._observer.unobserve(el);\n            this._observer.observe(el);\n        }\n        nextTick(this.lazyLoadHandler);\n    }\n    /**\r\n    * remove listener form list\r\n    * @param  {DOM} el\r\n    * @return\r\n    */\n    remove(el) {\n        if (!el) return;\n        this._observer && this._observer.unobserve(el);\n        const existItem = this.ListenerQueue.find(item => item.el === el);\n        if (existItem) {\n            this._removeListenerTarget(existItem.$parent);\n            this._removeListenerTarget(window);\n            remove(this.ListenerQueue, existItem);\n            existItem.$destroy && existItem.$destroy();\n        }\n    }\n    /*\r\n     * remove lazy components form list\r\n     * @param  {Vue} vm Vue instance\r\n     * @return\r\n     */\n    removeComponent(vm) {\n        if (!vm) return;\n        remove(this.ListenerQueue, vm);\n        this._observer && this._observer.unobserve(vm.el);\n        if (vm.$parent && vm.$el.parentNode) {\n            this._removeListenerTarget(vm.$el.parentNode);\n        }\n        this._removeListenerTarget(window);\n    }\n    setMode(mode) {\n        if (!hasIntersectionObserver && mode === modeType.observer) {\n            mode = modeType.event;\n        }\n        this.mode = mode; // event or observer\n        if (mode === modeType.event) {\n            if (this._observer) {\n                this.ListenerQueue.forEach(listener => {\n                    this._observer.unobserve(listener.el);\n                });\n                this._observer = null;\n            }\n            this.TargetQueue.forEach(target => {\n                this._initListen(target.el, true);\n            });\n        } else {\n            this.TargetQueue.forEach(target => {\n                this._initListen(target.el, false);\n            });\n            this._initIntersectionObserver();\n        }\n    }\n    /*\r\n    *** Private functions ***\r\n    */\n    /*\r\n     * add listener target\r\n     * @param  {DOM} el listener target\r\n     * @return\r\n     */\n    _addListenerTarget(el) {\n        if (!el) return;\n        let target = this.TargetQueue.find(target => target.el === el);\n        if (!target) {\n            target = {\n                el: el,\n                id: ++this.TargetIndex,\n                childrenCount: 1,\n                listened: true\n            };\n            this.mode === modeType.event && this._initListen(target.el, true);\n            this.TargetQueue.push(target);\n        } else {\n            target.childrenCount++;\n        }\n        return this.TargetIndex;\n    }\n    /*\r\n     * remove listener target or reduce target childrenCount\r\n     * @param  {DOM} el or window\r\n     * @return\r\n     */\n    _removeListenerTarget(el) {\n        this.TargetQueue.forEach((target, index) => {\n            if (target.el === el) {\n                target.childrenCount--;\n                if (!target.childrenCount) {\n                    this._initListen(target.el, false);\n                    this.TargetQueue.splice(index, 1);\n                    target = null;\n                }\n            }\n        });\n    }\n    /*\r\n     * add or remove eventlistener\r\n     * @param  {DOM} el DOM or Window\r\n     * @param  {boolean} start flag\r\n     * @return\r\n     */\n    _initListen(el, start) {\n        this.options.listenEvents.forEach(evt => _[start ? 'on' : 'off'](el, evt, this.lazyLoadHandler));\n    }\n    _initEvent() {\n        this.Event = {\n            listeners: {\n                loading: [],\n                loaded: [],\n                error: []\n            }\n        };\n        this.$on = (event, func) => {\n            if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n            this.Event.listeners[event].push(func);\n        };\n        this.$once = (event, func) => {\n            const vm = this;\n            function on() {\n                vm.$off(event, on);\n                func.apply(vm, arguments);\n            }\n            this.$on(event, on);\n        };\n        this.$off = (event, func) => {\n            if (!func) {\n                if (!this.Event.listeners[event]) return;\n                this.Event.listeners[event].length = 0;\n                return;\n            }\n            remove(this.Event.listeners[event], func);\n        };\n        this.$emit = (event, context, inCache) => {\n            if (!this.Event.listeners[event]) return;\n            this.Event.listeners[event].forEach(func => func(context, inCache));\n        };\n    }\n    /**\r\n     * find nodes which in viewport and trigger load\r\n     * @return\r\n     */\n    _lazyLoadHandler() {\n        const freeList = [];\n        this.ListenerQueue.forEach((listener, index) => {\n            if (!listener.el || !listener.el.parentNode || listener.state.loaded) {\n                freeList.push(listener);\n            }\n            const catIn = listener.checkInView();\n            if (!catIn) return;\n            if (!listener.state.loaded) listener.load();\n        });\n        freeList.forEach(item => {\n            remove(this.ListenerQueue, item);\n            item.$destroy && item.$destroy();\n        });\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * set mode to observer\r\n    * @return\r\n    */\n    _initIntersectionObserver() {\n        if (!hasIntersectionObserver) return;\n        this._observer = new IntersectionObserver(this._observerHandler.bind(this), this.options.observerOptions);\n        if (this.ListenerQueue.length) {\n            this.ListenerQueue.forEach(listener => {\n                this._observer.observe(listener.el);\n            });\n        }\n    }\n    /**\r\n    * init IntersectionObserver\r\n    * @param {Array<IntersectionObserverEntry>} entries\r\n    * @return\r\n    */\n    _observerHandler(entries) {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                this.ListenerQueue.forEach(listener => {\n                    if (listener.el === entry.target) {\n                        if (listener.state.loaded) return this._observer.unobserve(listener.el);\n                        listener.load();\n                    }\n                });\n            }\n        });\n    }\n    /**\r\n    * set element attribute with image'url and state\r\n    * @param  {ReactiveListener} lazyload listener object\r\n    * @param  {TeventType} state will be rendered\r\n    * @param  {bool} inCache  is rendered from cache\r\n    * @return\r\n    */\n    _elRenderer(listener, state, cache) {\n        if (!listener.el) return;\n        const { el, bindType } = listener;\n        let src;\n        switch (state) {\n            case 'loading':\n                src = listener.loading;\n                break;\n            case 'error':\n                src = listener.error;\n                break;\n            default:\n                src = listener.src;\n                break;\n        }\n        if (bindType) {\n            // @ts-ignore\n            el.style[bindType] = 'url(\"' + src + '\")';\n        } else if (el.getAttribute('src') !== src) {\n            el.setAttribute('src', src);\n        }\n        el.setAttribute('lazy', state);\n        this.$emit(state, listener, cache);\n        this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n        if (this.options.dispatchEvent) {\n            const event = new CustomEvent(state, {\n                detail: listener\n            });\n            el.dispatchEvent(event);\n        }\n    }\n    _valueFormatter(value) {\n        if (typeof value === 'object') {\n            if (!value.src && !this.options.silent) console.error('Vue Lazyload warning: miss src with ' + value);\n            return {\n                src: value.src,\n                loading: value.loading || this.options.loading,\n                error: value.error || this.options.error,\n                cors: this.options.cors\n            };\n        }\n        return {\n            src: value,\n            loading: this.options.loading,\n            error: this.options.error,\n            cors: this.options.cors\n        };\n    }\n}\n\nconst useCheckInView = (el, preLoad) => {\n    let rect = reactive({});\n    const getRect = () => {\n        rect = el.value.getBoundingClientRect();\n    };\n    const checkInView = () => {\n        getRect();\n        return inBrowser && rect.top < window.innerHeight * preLoad && rect.bottom > 0 && rect.left < window.innerWidth * preLoad && rect.right > 0;\n    };\n    return {\n        rect,\n        checkInView\n    };\n};\n\nvar LazyComponent = (lazy => {\n    return defineComponent({\n        props: {\n            tag: {\n                type: String,\n                default: 'div'\n            }\n        },\n        emits: ['show'],\n        setup(props, { emit, slots }) {\n            const el = ref();\n            const state = reactive({\n                loaded: false,\n                error: false,\n                attempt: 0\n            });\n            const show = ref(false);\n            const { rect, checkInView } = useCheckInView(el, lazy.options.preLoad);\n            const load = () => {\n                show.value = true;\n                state.loaded = true;\n                emit('show', show.value);\n            };\n            const vm = computed(() => {\n                return {\n                    el: el.value,\n                    rect,\n                    checkInView,\n                    load,\n                    state\n                };\n            });\n            onMounted(() => {\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            });\n            onUnmounted(() => {\n                lazy.removeComponent(vm.value);\n            });\n            return () => {\n                var _a;\n                return createVNode(props.tag, {\n                    ref: el\n                }, [show.value && ((_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots))]);\n            };\n        }\n    });\n});\n\nclass LazyContainerMananger {\n    constructor(lazy) {\n        this.lazy = lazy;\n        lazy.lazyContainerMananger = this;\n        this._queue = [];\n    }\n    bind(el, binding, vnode) {\n        const container = new LazyContainer(el, binding, vnode, this.lazy);\n        this._queue.push(container);\n    }\n    update(el, binding, vnode) {\n        const container = this._queue.find(item => item.el === el);\n        if (!container) return;\n        container.update(el, binding);\n    }\n    unbind(el, binding, vnode) {\n        const container = this._queue.find(item => item.el === el);\n        if (!container) return;\n        container.clear();\n        remove(this._queue, container);\n    }\n}\nconst defaultOptions = {\n    selector: 'img',\n    error: '',\n    loading: ''\n};\nclass LazyContainer {\n    constructor(el, binding, vnode, lazy) {\n        this.el = el;\n        this.vnode = vnode;\n        this.binding = binding;\n        this.options = {};\n        this.lazy = lazy;\n        this._queue = [];\n        this.update(el, binding);\n    }\n    update(el, binding) {\n        this.el = el;\n        this.options = assignDeep({}, defaultOptions, binding.value);\n        const imgs = this.getImgs();\n        imgs.forEach(el => {\n            this.lazy.add(el, assignDeep({}, this.binding, {\n                value: {\n                    src: el.getAttribute('data-src') || el.dataset.src,\n                    error: el.getAttribute('data-error') || el.dataset.error || this.options.error,\n                    loading: el.getAttribute('data-loading') || el.dataset.loading || this.options.loading\n                }\n            }), this.vnode);\n        });\n    }\n    getImgs() {\n        return Array.from(this.el.querySelectorAll(this.options.selector));\n    }\n    clear() {\n        const imgs = this.getImgs();\n        imgs.forEach(el => this.lazy.remove(el));\n        this.vnode = null;\n        this.binding = null;\n        this.lazy = null;\n    }\n}\n\nvar LazyImage = (lazy => {\n    return defineComponent({\n        setup(props, { slots }) {\n            const el = ref();\n            const options = reactive({\n                src: '',\n                error: '',\n                loading: '',\n                attempt: lazy.options.attempt\n            });\n            const state = reactive({\n                loaded: false,\n                error: false,\n                attempt: 0\n            });\n            const { rect, checkInView } = useCheckInView(el, lazy.options.preLoad);\n            const renderSrc = ref('');\n            const load = (onFinish = noop) => {\n                if (state.attempt > options.attempt - 1 && state.error) {\n                    if (!lazy.options.silent) console.log(`VueLazyload log: ${options.src} tried too more than ${options.attempt} times`);\n                    return onFinish();\n                }\n                const src = options.src;\n                loadImageAsync({ src }, ({ src }) => {\n                    renderSrc.value = src;\n                    state.loaded = true;\n                }, () => {\n                    state.attempt++;\n                    renderSrc.value = options.error;\n                    state.error = true;\n                });\n            };\n            const vm = computed(() => {\n                return {\n                    el: el.value,\n                    rect,\n                    checkInView,\n                    load,\n                    state\n                };\n            });\n            onMounted(() => {\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            });\n            onUnmounted(() => {\n                lazy.removeComponent(vm.value);\n            });\n            const init = () => {\n                const { src, loading, error } = lazy._valueFormatter(props.src);\n                state.loaded = false;\n                options.src = src;\n                options.error = error;\n                options.loading = loading;\n                renderSrc.value = options.loading;\n            };\n            watch(() => props.src, () => {\n                init();\n                lazy.addLazyBox(vm.value);\n                lazy.lazyLoadHandler();\n            }, {\n                immediate: true\n            });\n            return () => {\n                var _a;\n                return createVNode(props.tag || 'img', {\n                    src: renderSrc.value,\n                    ref: el\n                }, [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n            };\n        }\n    });\n});\n\nvar index = {\n    /*\r\n    * install function\r\n    * @param  {Vue} Vue\r\n    * @param  {object} options lazyload options\r\n    */\n    install(Vue, options = {}) {\n        const lazy = new Lazy(options);\n        const lazyContainer = new LazyContainerMananger(lazy);\n        const vueVersion = Number(Vue.version.split('.')[0]);\n        if (vueVersion < 3) return new Error('Vue version at least 3.0');\n        Vue.config.globalProperties.$Lazyload = lazy;\n        Vue.provide('Lazyload', lazy);\n        if (options.lazyComponent) {\n            Vue.component('lazy-component', LazyComponent(lazy));\n        }\n        if (options.lazyImage) {\n            Vue.component('lazy-image', LazyImage(lazy));\n        }\n        Vue.directive('lazy', {\n            beforeMount: lazy.add.bind(lazy),\n            beforeUpdate: lazy.update.bind(lazy),\n            updated: lazy.lazyLoadHandler.bind(lazy),\n            unmounted: lazy.remove.bind(lazy)\n        });\n        Vue.directive('lazy-container', {\n            beforeMount: lazyContainer.bind.bind(lazyContainer),\n            updated: lazyContainer.update.bind(lazyContainer),\n            unmounted: lazyContainer.unbind.bind(lazyContainer)\n        });\n    }\n};\n\nexport { index as default };\n"]},"metadata":{},"sourceType":"module"}